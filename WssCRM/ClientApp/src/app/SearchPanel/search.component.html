<Loader *ngIf="loading"></Loader>
<ng-container *ngIf="!loading">
  <mat-form-field>
    <mat-label>Выберите компанию</mat-label>
    <mat-select [(value)]="curFlt.company">
      <mat-option *ngFor="let c of fltlist.companies"
                  [value]="c">
        {{ c.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <ng-container *ngIf="!forLostCustomers; else ForLost">
    <mat-form-field>
      <mat-label>Выберите этап</mat-label>
      <mat-select [(value)]="curFlt.stage">
        <mat-option *ngFor="let s of curFlt.company.stages"
                    [value]="s">
          {{ s.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Выберите менеджера</mat-label>
      <mat-select [(value)]="curFlt.manager">
        <mat-option *ngFor="let m of curFlt.company.managers"
                    [value]="m">
          {{ m.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field color="accent">
      <input matInput [max]="curFlt.EndDate" [matDatepicker]="myDatepicker" placeholder="Выберите дату начала" [readonly]="true" [(ngModel)]="curFlt.StartDate">
      <mat-datepicker-toggle matSuffix [for]="myDatepicker"></mat-datepicker-toggle>
      <mat-datepicker #myDatepicker></mat-datepicker>
    </mat-form-field>
    <mat-form-field color="accent">
      <input matInput [min]="curFlt.StartDate" [matDatepicker]="myDatepicker2" placeholder="Выберите дату окончания" [readonly]="true" [(ngModel)]="curFlt.EndDate">
      <mat-datepicker-toggle matSuffix [for]="myDatepicker2"></mat-datepicker-toggle>
      <mat-datepicker #myDatepicker2></mat-datepicker>
    </mat-form-field>
  </ng-container>
  <mat-form-field *ngIf="forStatistic">
    <mat-label>Период</mat-label>
    <mat-select [(value)]="curFlt.period">
      <mat-option value="month">
        По месяцам
      </mat-option>
      <mat-option value="week">
        По неделям
      </mat-option>
      <mat-option value="day">
        По дням
      </mat-option>
    </mat-select>
  </mat-form-field>
</ng-container>
<ng-template #ForLost>
  <div>
    <mat-checkbox [(ngModel)]="curFlt.onlyNotProcessed">Только не разобранные с заказчиком</mat-checkbox>
  </div>
</ng-template>


