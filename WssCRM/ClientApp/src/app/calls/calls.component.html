<h1>Звонки</h1>

<mat-form-field>
  <mat-label>Выберите компанию</mat-label>
  <mat-select [(value)]="curFlt">
    <mat-option *ngFor="let c of fltlist.pointsFilter"
                [value]="c">
      {{ c.company.name }}
    </mat-option>
  </mat-select>
</mat-form-field>

<mat-form-field color="accent">
  <input matInput [max] = "DateEnd" [matDatepicker]="myDatepicker" placeholder="Выберите дату начала" [readonly]="true" [(ngModel)] ="DateBegin">
  <mat-datepicker-toggle matSuffix [for]="myDatepicker"></mat-datepicker-toggle>
  <mat-datepicker #myDatepicker></mat-datepicker>
</mat-form-field>
<mat-form-field color="accent">
  <input matInput [min]="DateBegin" [matDatepicker]="myDatepicker2" placeholder="Выберите дату окончания" [readonly]="true" [(ngModel)]="DateEnd">
  <mat-datepicker-toggle matSuffix [for]="myDatepicker2"></mat-datepicker-toggle>
  <mat-datepicker #myDatepicker2></mat-datepicker>
</mat-form-field>
<button type="button" class="btn btn-sm btn-success" (click)="getCalls()">Получить звонки</button>
<table class="table table-striped" *ngIf="callslist; else changecall">

  <thead>
    <tr>
      <th>Компания</th>
      <th>Этап</th>
      <th>Дата</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    
      <tr *ngFor="let c of calls">
        <td>{{c?.company}}</td>
        <td>{{c?.stage}}</td>
        <td>{{c?.date}}</td>
        <td>
          <button class="btn btn-sm btn-primary" (click)="editCall(c)">Изменить</button>
          <button class="btn btn-sm btn-danger">Удалить</button>
        </td>
      </tr>
  </tbody>

</table>
<ng-template #changecall>
  <button class="btn btn-sm btn-primary" (click)="returnCalls()">Вернуться ко всем звонкам</button>
  <app-call [call]="call"></app-call>
</ng-template>

